k8s {
   namespace = 'medgen-ns'
   runAsUser = 1000
   storageClaimName = 'pvc-janlambshare-storage-elixir1-cerit-sc-cz'
   homeDir = "/mnt/shared/MedGen/ONTdata/nanobreak/src/pipeline"

   launchDir = "${k8s.homeDir}/launch"
   projectDir = "${k8s.homeDir}/project"
   workDir = "${k8s.homeDir}/temp"
   useJobs = true
  // pullPolicy = 'IfNotPresent'
   pullPolicy = 'Always'
   storageMountPath = '/mnt'
   pod = [ [volumeClaim: 'pvc-jans-elixir-share', mountPath: "/storage" ]]
   computeResourceType = 'Job'
}

params {
   outDir = '/storage/share/110000-MED/110323-imgg/111323-plevova/01.NanoBreak/data/samples'

   ref = '/mnt/shared/999993-Bioda/data/ssd_3/references/homsap/GRCh38-p10/seq/GRCh38-p10.fa'
   vep = '/mnt/shared/999993-Bioda/data/ssd_3/references/homsap/GRCh38-p10/annot/vep'
   refFlat = "${k8s.projectDir}/xsvato01/nanopore_k8s/bin/refFlatNoChr.txt"
   ComputeDistance = "${k8s.projectDir}/xsvato01/nanopore_k8s/bin/ComputeDistance.py"
   TagUniqes =  "${k8s.projectDir}/xsvato01/nanopore_k8s/bin/TagUnique.py"
   circos =  "${k8s.projectDir}/xsvato01/nanopore_k8s/bin/circos.R"  
   grch38_lens =  "${k8s.projectDir}/xsvato01/nanopore_k8s/bin/grch38_lens.txt"  

   //data = '/mnt/shared/MedGen/ONTdata/Sabina_HMW/BRNO1837/1837_sre_fra_lig_flg/20221011_1137_MN16014_amb036_7ac7046a/fastq_pass'
}


executor {
   queueSize = 50
}

process {

   withLabel: big_mem {
        memory = 80.GB
    }

withLabel: biggest_mem {
        memory = 300.GB
    }

   withLabel: big_cpus {
        cpus = 64
    }

     withLabel: small_process {
        cpus = 2
        memory = 4.GB
    }



   shell = ['/bin/bash', '-euo', 'pipefail']
   container = 'registry.gitlab.ics.muni.cz:443/450402/nanopore_k8s:latest'
   scratch = true
   executor = 'k8s'
   cpus = 16
   memory = '32GB'
   pod = [[securityContext:[fsGroupChangePolicy:'OnRootMismatch', runAsUser:1000, runAsGroup:1, fsGroup:1]], [nodeSelector:'storage=local-ssd']]
   //errorStrategy = 'finish'
}

manifest {
  defaultBranch = 'main'
}
